<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
    "-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
    "https://checkstyle.org/dtds/configuration_1_3.dtd">

<!--
    Configuración de Checkstyle enfocada en reglas de alto nivel.
    NO incluye reglas de formato (delegadas a Spotless).
    Prioriza detección de problemas de naming, estructura y malas prácticas.
-->
<module name="Checker">
    <property name="charset" value="UTF-8"/>
    <property name="severity" value="error"/>
    <property name="fileExtensions" value="java"/>

    <!-- Excluir archivos generados -->
    <module name="BeforeExecutionExclusionFileFilter">
        <property name="fileNamePattern" value=".*[\\/]build[\\/].*"/>
    </module>

    <module name="TreeWalker">
        <!-- Suprimir advertencias con comentarios -->
        <module name="SuppressionCommentFilter">
            <property name="offCommentFormat" value="CHECKSTYLE:OFF"/>
            <property name="onCommentFormat" value="CHECKSTYLE:ON"/>
        </module>
        <!-- Suprimir checks específicos con comentarios -->
        <module name="SuppressionCommentFilter">
            <property name="offCommentFormat" value="CHECKSTYLE.OFF\: ([\w\|]+)"/>
            <property name="onCommentFormat" value="CHECKSTYLE.ON\: ([\w\|]+)"/>
            <property name="checkFormat" value="$1"/>
        </module>

        <!-- ===== NAMING CONVENTIONS ===== -->

        <!-- Nombres de clases: PascalCase -->
        <module name="TypeName">
            <property name="format" value="^[A-Z][a-zA-Z0-9]*$"/>
            <message key="name.invalidPattern"
                     value="El nombre de tipo ''{0}'' debe estar en PascalCase."/>
        </module>

        <!-- Nombres de métodos: camelCase -->
        <module name="MethodName">
            <property name="format" value="^[a-z][a-zA-Z0-9]*$"/>
            <message key="name.invalidPattern"
                     value="El nombre de método ''{0}'' debe estar en camelCase."/>
        </module>

        <!-- Nombres de constantes: UPPER_SNAKE_CASE -->
        <module name="ConstantName">
            <property name="format" value="^[A-Z][A-Z0-9]*(_[A-Z0-9]+)*$"/>
            <message key="name.invalidPattern"
                     value="El nombre de constante ''{0}'' debe estar en UPPER_SNAKE_CASE."/>
        </module>

        <!-- Nombres de variables locales y parámetros: camelCase -->
        <module name="LocalVariableName">
            <property name="format" value="^[a-z][a-zA-Z0-9]*$"/>
        </module>

        <module name="ParameterName">
            <property name="format" value="^[a-z][a-zA-Z0-9]*$"/>
        </module>

        <!-- Nombres de miembros: camelCase -->
        <module name="MemberName">
            <property name="format" value="^[a-z][a-zA-Z0-9]*$"/>
        </module>

        <!-- Nombres de paquetes: lowercase -->
        <module name="PackageName">
            <property name="format" value="^[a-z]+(\.[a-z][a-z0-9]*)*$"/>
        </module>

        <!-- ===== IMPORTS ===== -->

        <!-- Prohibir imports con wildcard (*) -->
        <module name="AvoidStarImport"/>

        <!-- Prohibir imports redundantes -->
        <module name="RedundantImport"/>

        <!-- Prohibir imports no utilizados -->
        <module name="UnusedImports"/>

        <!-- Prohibir imports ilegales (sun.*, etc.) -->
        <module name="IllegalImport"/>

        <!-- ===== MALAS PRACTICAS ===== -->

        <!-- Prohibir System.out y System.err -->
        <module name="Regexp">
            <property name="format" value="System\.(out|err)\.print"/>
            <property name="illegalPattern" value="true"/>
            <property name="ignoreComments" value="true"/>
            <property name="message" value="Usar logger en lugar de System.out/err"/>
        </module>

        <!-- Detectar bloques catch vacíos -->
        <module name="EmptyCatchBlock">
            <property name="exceptionVariableName" value="expected|ignore"/>
        </module>

        <!-- Detectar bloques de código vacíos -->
        <module name="EmptyBlock">
            <property name="option" value="text"/>
        </module>

        <!-- ===== COMPLEJIDAD Y ESTRUCTURA ===== -->

        <!-- Complejidad ciclomática máxima -->
        <module name="CyclomaticComplexity">
            <property name="max" value="15"/>
        </module>

        <!-- Máximo de parámetros en métodos -->
        <module name="ParameterNumber">
            <property name="max" value="7"/>
            <property name="tokens" value="METHOD_DEF"/>
        </module>

        <!-- Longitud máxima de métodos (líneas de código) -->
        <module name="MethodLength">
            <property name="tokens" value="METHOD_DEF"/>
            <property name="max" value="150"/>
            <property name="countEmpty" value="false"/>
        </module>

        <!-- ===== MEJORES PRACTICAS ===== -->

        <!-- Requiere @Override en métodos sobrescritos -->
        <module name="MissingOverride"/>

        <!-- Arrays con estilo Java (String[] args, no String args[]) -->
        <module name="ArrayTypeStyle"/>

        <!-- Modificadores en orden estándar -->
        <module name="ModifierOrder"/>

        <!-- Un statement por línea -->
        <module name="OneStatementPerLine"/>

        <!-- Variables locales finales donde sea posible no es obligatorio pero recomendado
        <module name="FinalLocalVariable"/>
        -->

        <!-- ===== JAVADOC (opcional pero recomendado para APIs públicas) ===== -->

        <!-- Requiere Javadoc en clases y interfaces públicas -->
        <module name="MissingJavadocType">
            <property name="scope" value="public"/>
            <property name="tokens" value="INTERFACE_DEF, CLASS_DEF"/>
        </module>

        <!-- Requiere Javadoc en métodos públicos -->
        <module name="MissingJavadocMethod">
            <property name="scope" value="public"/>
            <property name="allowMissingPropertyJavadoc" value="true"/>
            <property name="tokens" value="METHOD_DEF"/>
        </module>
    </module>
</module>
